<!DOCTYPE html>


<html>
<head>
<title>Scrape the Quote</title>

<link rel="stylesheet" href="style.css">
</head>

<body>

  <h1> L. R. Berg&eacute;'s fav quotes</h1>

  <article>
    <p>Below, you can find one of my favorite quotes. You just have to click. </p>
    <p>There are two quotes in total: one appears with 95% chance, and the other with 5% chance. </p>
    <p>To find the two quotes, you can click and reload a lot... or scrape it. </p>

    <div class="quote-container">
      <p id="quote">Click me to discover the quote</p>
    </div>

    <div id="qmark">
      <div>?</div>
    </div>

  </article> 

  <article class="purpose">
    <div id="expl-container">
      <h2 id="explanation">Purpose</h2>
      <p>The purpose of this webpage is to illustrate how to 
        scrape pages containing dynamic content.</p>
    
      <p>It kind of mimics AJAX whereby content is dynamically requested to the server and 
        loaded onto the webpage depending on the actions of the client. </p>
    
      <p>This is a static page however, so you can reverse engineer the quotes 
        (beware: it may be non obvious &#128521;).</p>
    </div>
  </article>
  
  <footer>
    <p> <span class="cursif">Created by</span> <a class="lrberge" href="https://sites.google.com/site/laurentrberge/home">Laurent R. Berg&eacute;</a> </p>
  </footer> 

<script>

let expl = document.querySelector("#qmark");
let explState = 0;
function expandExpl(){
  let explInfo = document.querySelector("#expl-container");
  if(explState == 0){
    explInfo.style.display = "block";
  } else {
    explInfo.style.display = "none";
  }
  explState = 1 - explState;
}

expl.addEventListener("click", expandExpl);
</script>

<script>

let dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 
'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 
'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 
'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 
'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', 
'6', '7', '8', '9', '&', '\'', '/', '=', ',', ' ', '-', 
'!', '.', ';', '<', '>', '\n'];

let quote = document.querySelector("#quote");

function quote_id(){
  let id = (Math.random() < 0.05) * 1;
  return id;
}

function genQuote(){
  let p_new = document.createElement("p");
  let id = quote_id();
  let qval = ["EJPW7sV-YFiVD FuxawQlQmuU6BI W'mPVUt.4DojlAlGwJ> oZSd1FzoFFmy\njCi/Fy5H6M.eD;&.CfhiV'iD3OoU3zuuk-T2XpFAnmM4ibO4\nIf.9x u.OM/O4wkVl6eMM", 
  "EJP4X-6-PBeAP5GiA4LHGt<nX7FJ q4oPRapW4FfCFv8AMA>7lRBz6AH\nCDuyknD,SJHT3;9tyuk.4D6<gSexf,WBXVZkCoQQ-dsClb.kjibgXcj6oyB=cOWueI-D!GlBGK9pwhoQ.KAjT4AbdI/F"];
  p_new.innerHTML = decode(qval[id]);
  this.replaceWith(p_new);
}

function decode(x){
  res = "";
  key = [33, 19, 43, 17, 45, 76, 55, 64, 29, 27, 66, 23, 37, 65, 92, 8, 83, 64, 18, 19, 19, 27, 70, 6, 45, 47, 98, 22, 75, 29, 56, 8, 24, 43, 54, 86, 52, 64, 29, 76, 92, 11, 88, 68, 10, 93, 93, 6, 48, 82, 51, 25, 11, 45, 88, 33, 12, 20, 27, 12, 7, 8, 17, 85, 0, 52, 16, 13, 53, 38, 63, 43, 3, 79, 16, 68, 70, 48, 86, 66, 69, 77, 52, 66, 94, 13, 57, 48, 90, 49, 39, 33, 18, 9, 85, 50, 27, 64, 61, 15, 11, 82, 6, 73, 21, 68, 85, 9, 82, 52, 61, 92, 56, 78, 24, 9, 47, 12, 52, 48, 0, 60, 27, 54, 87, 6, 34, 19, 61, 15, 22, 40, 86, 80, 6, 85, 50, 20, 28, 23, 81, 37, 38, 19, 84, 81, 45, 48, 33, 31, 77];

  let nd = dict.length;
  n = x.length;
  for(let i=0 ; i<n ; i++){
    index = dict.indexOf(x[i]);
    ival = (index - key[i]) % nd;
    if(ival < 0){
      ival = nd + ival;
    }
    res += dict[ival];
  }

  return res;
}

quote.addEventListener("click", genQuote);


</script>

</body>
</html>